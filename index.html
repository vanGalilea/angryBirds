<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
  <title>Angry Birds</title>
	<script type="text/javascript" src="js/phaser.min.js"></script>
	<link rel="stylesheet" type="text/css" href="styles.css">

</head>
<body>
	<script type="text/javascript">
		var game = new Phaser.Game(750, 560, Phaser.AUTO, '', { preload: preload, create: create, update: update });

		function preload() {
			game.load.image('background', 'assets/background.png');
			game.load.image('ground', 'assets/platform.png');
			game.load.image('beer', 'assets/beerbottle.png');
			game.load.image('bird', 'assets/angrybird.png');
		}

		var bird;
		var platforms;
		var cursors;
		var beers;
		var score = 0;
		var scoreText;

		function create() {
			game.physics.startSystem(Phaser.Physics.ARCADE);
			game.add.sprite(0, 0, 'background');

			platforms = game.add.group();
			platforms.enableBody = true;
			var ground = platforms.create(-10, game.world.height - 70, 'ground');

			ground.body.immovable = true;

			bird = game.add.sprite(20, game.world.height - 200, 'bird');

	    game.physics.arcade.enable(bird);

	    bird.body.bounce.y = 0.3;
	    bird.body.gravity.y = 250;
	    bird.body.collideWorldBounds = true;

			beers = game.add.group();

	    beers.enableBody = true;

	    for (var i = 0; i < 4; i++) {
	      var beer = beers.create(game.world.width-150 - i * 30, game.world.height - 200, 'beer');
        beer.body.gravity.y = 300;
	      beer.body.bounce.y = 0.2;
				beer.body.collideWorldBounds = true;
	    }

			scoreText = game.add.text(16, 16, 'score: 0', { fontSize: '32px', fill: '#000' });
	    cursors = game.input.keyboard.createCursorKeys();

		}

		function update() {
			game.physics.arcade.collide(bird, platforms);
	    game.physics.arcade.collide(beers, platforms);
			game.physics.arcade.overlap(bird, beers, colideAndIncScore, null, this);

			bird.body.velocity.x = 0;

	    if (cursors.left.isDown) {
	        bird.body.velocity.x = -150;
	    } else if (cursors.right.isDown) {
	        bird.body.velocity.x = 150;
	    } else{
	        // bird.animations.stop();
	        // bird.frame = 4;
	    }

	    //  Allow the bird to jump if they are touching the ground.
	    if (cursors.up.isDown && bird.body.touching.down)
	    {
	        bird.body.velocity.y = -350;
	    }

	}

	function colideAndIncScore (bird, beer) {

	    //animate collison between beers and bird

	    score += 10;
	    scoreText.text = 'Score: ' + score;
	}

	</script>

</body>
</html>
